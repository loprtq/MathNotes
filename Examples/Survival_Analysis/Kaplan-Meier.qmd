:::{#exm-Kaplan_Meier}
## Kaplan-Meier estimator

:::{.panel-tabset}
## R
```{r}
#| eval: false
#| echo: true
#| warning: false
# Packages
library(dplyr)
library(survival)
library(survminer)

# Data
## Get data
data(cancer, package = "survival")

## Transform and select data
data_f <- lung %>%
    dplyr::select(-c(ph.ecog, ph.karno, pat.karno, meal.cal, wt.loss)) %>%
    dplyr::mutate(sex = if_else(sex == 1, "Male", "Female")) %>%
    dplyr::mutate_at(.vars = c("inst", "status", "sex"), .funs = as.factor)

# Model
# * status == 1: event, status == 0: censored
KM_fit <- survival::survfit(survival::Surv(time, status == 1) ~ 1, data_f)

## Coefficients
summary(KM_fit)

# Plot
survminer::ggsurvplot(KM_fit, conf.int = TRUE, data = data_f)
```
:::
:::